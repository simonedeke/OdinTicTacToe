<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="Container">
        <!-- <div class="PlayerBox">
            <div class="Player1">
                <img src='Images/message-black.svg' height='24px' width='24px'>
                <div class="Player1Name">Player 1</div>
                
            </div>
            <div class="Score">
                <div class="ScoreImg">Score</div>
                <div id="Player1Score">0</div>
                <div id="Player2Score">0</div>
            </div>
            <div class="Player2">
                <img src='Images/cog-black.svg' height='24px' width='24px'>
                <div class="Player2Name">Player 2</div>
            </div>
            <div class="GameBoard">
                <div class='Square'><img src='Images/message-black.svg' height='24px' width='24px'></div>
                <div class="Square"><img src="Images/cog-black.svg" height="24px" width="24px"></div>
                <div class="Square"><img src="Images/message-black.svg" height="24px" width="24px"></div>
                <div class="Square"><img src="Images/cog-black.svg" height="24px" width="24px"></div>
                <div class="Square"><img src="Images/message-black.svg" height="24px" width="24px"></div>
                <div class="Square"><img src="Images/cog-black.svg" height="24px" width="24px"></div>
                <div class="Square"><img src="Images/message-black.svg" height="24px" width="24px"></div>
                <div class="Square"><img src="Images/cog-black.svg" height="24px" width="24px"></div>
                <div class="Square"><img src="Images/message-black.svg" height="24px" width="24px"></div>
            </div>
        </div>-->
    </div> 
</body>

<script>
    const GameBoard = (() => {
        let _Board = [[null, null, null],
                      [null,null,null],
                      [null,null,null]];

        let _playerTurn = false;

        const _player1Img = document.createElement('img');
        _player1Img.src = 'Images/message-black.svg';
        _player1Img.setAttribute('height','48px');
        _player1Img.setAttribute('width','48px');
        const _player2Img = document.createElement('img');
        _player2Img.src = 'Images/cog-black.svg';
        _player2Img.setAttribute('height','48px');
        _player2Img.setAttribute('width','48px');
        
        const displayBoard = () => {
            let fullDisplay = document.createElement('div');
            fullDisplay.className = 'PlayerBox';

            let p1Div = document.createElement('div');
            p1Div.className = 'Player1';
            p1Div.appendChild(_player1Img);
            let p1NameDiv = document.createElement('div');
            p1NameDiv.className = 'Player1';
            p1NameDiv.innerText = 'Player 1';
            p1Div.appendChild(p1NameDiv);

            let scoreDiv = document.createElement('div');
            scoreDiv.className = 'Score';
            let scoreImgDiv = document.createElement('div');
            scoreImgDiv.className = 'ScoreImg';
            scoreImgDiv.innerText = 'Score';
            let p1ScoreDiv = document.createElement('div');
            p1ScoreDiv.className = 'Player1Score';
            p1ScoreDiv.innerText = '0';
            let p2ScoreDiv = document.createElement('div');
            p2ScoreDiv.className = 'Player2Score';
            p2ScoreDiv.innerText = '0';
            scoreDiv.appendChild(scoreImgDiv);
            scoreDiv.appendChild(p1ScoreDiv);
            scoreDiv.appendChild(p2ScoreDiv);

            let p2Div = document.createElement('div');
            p2Div.className = 'Player2';
            p2Div.appendChild(_player2Img);
            let p2NameDiv = document.createElement('div');
            p2NameDiv.className = 'Player2';
            p2NameDiv.innerText = 'Player 2';
            p2Div.appendChild(p2NameDiv);

            fullDisplay.appendChild(p1Div);
            fullDisplay.appendChild(scoreDiv);
            fullDisplay.appendChild(p2Div);
            // <div class="Player1">
            //     <img src='Images/message-black.svg' height='24px' width='24px'>
            //     <div class="Player1Name">Player 1</div>
                
            // </div>
            // <div class="Score">
            //     <div class="ScoreImg">Score</div>
            //     <div id="Player1Score">0</div>
            //     <div id="Player2Score">0</div>
            // </div>
            // <div class="Player2">
            //     <img src='Images/cog-black.svg' height='24px' width='24px'>
            //     <div class="Player2Name">Player 2</div>
            // </div>

            let outputBoard = document.createElement('div');
            outputBoard.className = 'GameBoard';

            _Board.forEach(row => {
                row.forEach(column => {
                    let outputSquare = document.createElement('div');
                    outputSquare.className = 'Square';
                    if(column == null){
                        let outputNull = document.createElement('img');
                        // outputX.src = _BlankImage;
                        outputNull.setAttribute('height','48px');
                        outputNull.setAttribute('width','48px');
                        outputSquare.appendChild(outputNull)
                    }
                    else if(column) {
                        // let outputX = document.createElement('img');
                        // outputX.src = _player1Img;
                        // outputX.setAttribute('height','24px');
                        // outputX.setAttribute('width','24px');
                        outputSquare.appendChild(_player1Img);
                    }
                    else {
                        // let outputOh = document.createElement('img');
                        // outputOh.src = _player2Img;
                        // outputOh.setAttribute('height','24px');
                        // outputOh.setAttribute('width','24px');
                        outputSquare.appendChild(_player2Img);
                    }
                    outputSquare.addEventListener("click", e => { _sqrClicked(e);});
                    outputBoard.append(outputSquare); 
                })
            });

            fullDisplay.appendChild(outputBoard);
            return fullDisplay;
        };
        
        const _sqrClicked = (e) => {
            console.log(e.target.children);
            let _img = e.target;

            if(_img.children.length != 0){
                _img = _img.children[0];
            }

            console.log("imgsrc");
            console.log(_img.src);
            
            if(_img.src != ""){
                console.log("this has already been taken");
            }
            else {
                if(_playerTurn) {
                    _img.src = _player2Img.src;
                }
                else {
                    _img.src = _player1Img.src;
                }
                _playerTurn = !_playerTurn;
            }
            _checkWin;
        } 
        const _checkWin = () => {
            return false;
        }

        return {displayBoard};
    })();

    console.log(GameBoard.displayBoard());
    document.querySelector('.Container').append(GameBoard.displayBoard());
    

    let testBoard = [[false, true, true],
                      [false,true,false],
                      [false,false,true]];

    function testWin(testBoardWin) {
        let v1x = 0;
        let v2x = 0;
        let v3x = 0;
        let v1oh = 0;
        let v2oh = 0;
        let v3oh = 0;
        let crossL2R = 0;
        let crossR2L = 0;
        let win = false;
        testBoardWin.forEach(row => {
            if((row.every((currentValue) => currentValue)) && !win) {xWin();win=true;}
            if((row.every((currentValue) => !currentValue)) && !win) {ohWin();win=true;}
            row[0] ? v1x++ : v1oh++;
            row[1] ? v2x++ : v2oh++;
            row[2] ? v3x++ : v3oh++;
            
            if(v1x >2) {xWin();win=true;}
            if(v2x >2 && !win) {xWin();win=true;}
            if(v3x >2 && !win) {xWin();win=true;}
            if(v1oh >2 && !win) {ohWin();win=true;}
            if(v2oh >2 && !win) {ohWin();win=true;}
            if(v3oh >2 && !win) {ohWin();win=true;}
        });

    };

    function xWin() {
        console.log("x wins");
    }
    function ohWin() {
        console.log("oh wins");
    }
    testWin(testBoard);
    const Player = (name) => {
        const _wins = 0;
        

    };
</script>
</html>